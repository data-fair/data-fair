<!doctype html>
<html data-n-head-ssr>
  <head>
    <title>DataFair</title><meta data-n-head="ssr" charset="utf-8"><meta data-n-head="ssr" name="viewport" content="width=device-width,initial-scale=1"><meta data-n-head="ssr" data-hid="application" name="application-name" content="DataFair"><meta data-n-head="ssr" data-hid="description" name="description" content="DataFair - Documentation"><base href="/data-fair/master/"><link data-n-head="ssr" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Nunito:300,400,500,700,400italic|Material+Icons"><link data-n-head="ssr" rel="icon" type="image/x-icon" href="favicon.ico"><link data-n-head="ssr" rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Nunito:100,300,400,500,700,900&display=swap"><link data-n-head="ssr" rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/@mdi/font@latest/css/materialdesignicons.min.css"><style data-n-head="vuetify" type="text/css" id="vuetify-theme-stylesheet" nonce="undefined">.v-application a{color:#1e88e5}.v-application .primary{background-color:#1e88e5!important;border-color:#1e88e5!important}.v-application .primary--text{color:#1e88e5!important;caret-color:#1e88e5!important}.v-application .primary.lighten-5{background-color:#cfffff!important;border-color:#cfffff!important}.v-application .primary--text.text--lighten-5{color:#cfffff!important;caret-color:#cfffff!important}.v-application .primary.lighten-4{background-color:#b0f5ff!important;border-color:#b0f5ff!important}.v-application .primary--text.text--lighten-4{color:#b0f5ff!important;caret-color:#b0f5ff!important}.v-application .primary.lighten-3{background-color:#91d8ff!important;border-color:#91d8ff!important}.v-application .primary--text.text--lighten-3{color:#91d8ff!important;caret-color:#91d8ff!important}.v-application .primary.lighten-2{background-color:#70bdff!important;border-color:#70bdff!important}.v-application .primary--text.text--lighten-2{color:#70bdff!important;caret-color:#70bdff!important}.v-application .primary.lighten-1{background-color:#4da2ff!important;border-color:#4da2ff!important}.v-application .primary--text.text--lighten-1{color:#4da2ff!important;caret-color:#4da2ff!important}.v-application .primary.darken-1{background-color:#006fc9!important;border-color:#006fc9!important}.v-application .primary--text.text--darken-1{color:#006fc9!important;caret-color:#006fc9!important}.v-application .primary.darken-2{background-color:#0057ad!important;border-color:#0057ad!important}.v-application .primary--text.text--darken-2{color:#0057ad!important;caret-color:#0057ad!important}.v-application .primary.darken-3{background-color:#004092!important;border-color:#004092!important}.v-application .primary--text.text--darken-3{color:#004092!important;caret-color:#004092!important}.v-application .primary.darken-4{background-color:#002b78!important;border-color:#002b78!important}.v-application .primary--text.text--darken-4{color:#002b78!important;caret-color:#002b78!important}.v-application .secondary{background-color:#42a5f5!important;border-color:#42a5f5!important}.v-application .secondary--text{color:#42a5f5!important;caret-color:#42a5f5!important}.v-application .secondary.lighten-5{background-color:#e4ffff!important;border-color:#e4ffff!important}.v-application .secondary--text.text--lighten-5{color:#e4ffff!important;caret-color:#e4ffff!important}.v-application .secondary.lighten-4{background-color:#c5ffff!important;border-color:#c5ffff!important}.v-application .secondary--text.text--lighten-4{color:#c5ffff!important;caret-color:#c5ffff!important}.v-application .secondary.lighten-3{background-color:#a6f8ff!important;border-color:#a6f8ff!important}.v-application .secondary--text.text--lighten-3{color:#a6f8ff!important;caret-color:#a6f8ff!important}.v-application .secondary.lighten-2{background-color:#87dcff!important;border-color:#87dcff!important}.v-application .secondary--text.text--lighten-2{color:#87dcff!important;caret-color:#87dcff!important}.v-application .secondary.lighten-1{background-color:#66c0ff!important;border-color:#66c0ff!important}.v-application .secondary--text.text--lighten-1{color:#66c0ff!important;caret-color:#66c0ff!important}.v-application .secondary.darken-1{background-color:#018bd8!important;border-color:#018bd8!important}.v-application .secondary--text.text--darken-1{color:#018bd8!important;caret-color:#018bd8!important}.v-application .secondary.darken-2{background-color:#0072bc!important;border-color:#0072bc!important}.v-application .secondary--text.text--darken-2{color:#0072bc!important;caret-color:#0072bc!important}.v-application .secondary.darken-3{background-color:#0059a1!important;border-color:#0059a1!important}.v-application .secondary--text.text--darken-3{color:#0059a1!important;caret-color:#0059a1!important}.v-application .secondary.darken-4{background-color:#004286!important;border-color:#004286!important}.v-application .secondary--text.text--darken-4{color:#004286!important;caret-color:#004286!important}.v-application .accent{background-color:#ff9800!important;border-color:#ff9800!important}.v-application .accent--text{color:#ff9800!important;caret-color:#ff9800!important}.v-application .accent.lighten-5{background-color:#ffffa2!important;border-color:#ffffa2!important}.v-application .accent--text.text--lighten-5{color:#ffffa2!important;caret-color:#ffffa2!important}.v-application .accent.lighten-4{background-color:#ffff85!important;border-color:#ffff85!important}.v-application .accent--text.text--lighten-4{color:#ffff85!important;caret-color:#ffff85!important}.v-application .accent.lighten-3{background-color:#ffeb69!important;border-color:#ffeb69!important}.v-application .accent--text.text--lighten-3{color:#ffeb69!important;caret-color:#ffeb69!important}.v-application .accent.lighten-2{background-color:#ffcf4d!important;border-color:#ffcf4d!important}.v-application .accent--text.text--lighten-2{color:#ffcf4d!important;caret-color:#ffcf4d!important}.v-application .accent.lighten-1{background-color:#ffb32f!important;border-color:#ffb32f!important}.v-application .accent--text.text--lighten-1{color:#ffb32f!important;caret-color:#ffb32f!important}.v-application .accent.darken-1{background-color:#df7e00!important;border-color:#df7e00!important}.v-application .accent--text.text--darken-1{color:#df7e00!important;caret-color:#df7e00!important}.v-application .accent.darken-2{background-color:#bf6400!important;border-color:#bf6400!important}.v-application .accent--text.text--darken-2{color:#bf6400!important;caret-color:#bf6400!important}.v-application .accent.darken-3{background-color:#a14c00!important;border-color:#a14c00!important}.v-application .accent--text.text--darken-3{color:#a14c00!important;caret-color:#a14c00!important}.v-application .accent.darken-4{background-color:#843300!important;border-color:#843300!important}.v-application .accent--text.text--darken-4{color:#843300!important;caret-color:#843300!important}.v-application .error{background-color:#ff5252!important;border-color:#ff5252!important}.v-application .error--text{color:#ff5252!important;caret-color:#ff5252!important}.v-application .error.lighten-5{background-color:#ffe4d5!important;border-color:#ffe4d5!important}.v-application .error--text.text--lighten-5{color:#ffe4d5!important;caret-color:#ffe4d5!important}.v-application .error.lighten-4{background-color:#ffc6b9!important;border-color:#ffc6b9!important}.v-application .error--text.text--lighten-4{color:#ffc6b9!important;caret-color:#ffc6b9!important}.v-application .error.lighten-3{background-color:#ffa99e!important;border-color:#ffa99e!important}.v-application .error--text.text--lighten-3{color:#ffa99e!important;caret-color:#ffa99e!important}.v-application .error.lighten-2{background-color:#ff8c84!important;border-color:#ff8c84!important}.v-application .error--text.text--lighten-2{color:#ff8c84!important;caret-color:#ff8c84!important}.v-application .error.lighten-1{background-color:#ff6f6a!important;border-color:#ff6f6a!important}.v-application .error--text.text--lighten-1{color:#ff6f6a!important;caret-color:#ff6f6a!important}.v-application .error.darken-1{background-color:#df323b!important;border-color:#df323b!important}.v-application .error--text.text--darken-1{color:#df323b!important;caret-color:#df323b!important}.v-application .error.darken-2{background-color:#bf0025!important;border-color:#bf0025!important}.v-application .error--text.text--darken-2{color:#bf0025!important;caret-color:#bf0025!important}.v-application .error.darken-3{background-color:#9f0010!important;border-color:#9f0010!important}.v-application .error--text.text--darken-3{color:#9f0010!important;caret-color:#9f0010!important}.v-application .error.darken-4{background-color:maroon!important;border-color:maroon!important}.v-application .error--text.text--darken-4{color:maroon!important;caret-color:maroon!important}.v-application .info{background-color:#2196f3!important;border-color:#2196f3!important}.v-application .info--text{color:#2196f3!important;caret-color:#2196f3!important}.v-application .info.lighten-5{background-color:#d4ffff!important;border-color:#d4ffff!important}.v-application .info--text.text--lighten-5{color:#d4ffff!important;caret-color:#d4ffff!important}.v-application .info.lighten-4{background-color:#b5ffff!important;border-color:#b5ffff!important}.v-application .info--text.text--lighten-4{color:#b5ffff!important;caret-color:#b5ffff!important}.v-application .info.lighten-3{background-color:#95e8ff!important;border-color:#95e8ff!important}.v-application .info--text.text--lighten-3{color:#95e8ff!important;caret-color:#95e8ff!important}.v-application .info.lighten-2{background-color:#75ccff!important;border-color:#75ccff!important}.v-application .info--text.text--lighten-2{color:#75ccff!important;caret-color:#75ccff!important}.v-application .info.lighten-1{background-color:#51b0ff!important;border-color:#51b0ff!important}.v-application .info--text.text--lighten-1{color:#51b0ff!important;caret-color:#51b0ff!important}.v-application .info.darken-1{background-color:#007cd6!important;border-color:#007cd6!important}.v-application .info--text.text--darken-1{color:#007cd6!important;caret-color:#007cd6!important}.v-application .info.darken-2{background-color:#0064ba!important;border-color:#0064ba!important}.v-application .info--text.text--darken-2{color:#0064ba!important;caret-color:#0064ba!important}.v-application .info.darken-3{background-color:#004d9f!important;border-color:#004d9f!important}.v-application .info--text.text--darken-3{color:#004d9f!important;caret-color:#004d9f!important}.v-application .info.darken-4{background-color:#003784!important;border-color:#003784!important}.v-application .info--text.text--darken-4{color:#003784!important;caret-color:#003784!important}.v-application .success{background-color:#4caf50!important;border-color:#4caf50!important}.v-application .success--text{color:#4caf50!important;caret-color:#4caf50!important}.v-application .success.lighten-5{background-color:#dcffd6!important;border-color:#dcffd6!important}.v-application .success--text.text--lighten-5{color:#dcffd6!important;caret-color:#dcffd6!important}.v-application .success.lighten-4{background-color:#beffba!important;border-color:#beffba!important}.v-application .success--text.text--lighten-4{color:#beffba!important;caret-color:#beffba!important}.v-application .success.lighten-3{background-color:#a2ff9e!important;border-color:#a2ff9e!important}.v-application .success--text.text--lighten-3{color:#a2ff9e!important;caret-color:#a2ff9e!important}.v-application .success.lighten-2{background-color:#85e783!important;border-color:#85e783!important}.v-application .success--text.text--lighten-2{color:#85e783!important;caret-color:#85e783!important}.v-application .success.lighten-1{background-color:#69cb69!important;border-color:#69cb69!important}.v-application .success--text.text--lighten-1{color:#69cb69!important;caret-color:#69cb69!important}.v-application .success.darken-1{background-color:#2d9437!important;border-color:#2d9437!important}.v-application .success--text.text--darken-1{color:#2d9437!important;caret-color:#2d9437!important}.v-application .success.darken-2{background-color:#00791e!important;border-color:#00791e!important}.v-application .success--text.text--darken-2{color:#00791e!important;caret-color:#00791e!important}.v-application .success.darken-3{background-color:#006000!important;border-color:#006000!important}.v-application .success--text.text--darken-3{color:#006000!important;caret-color:#006000!important}.v-application .success.darken-4{background-color:#004700!important;border-color:#004700!important}.v-application .success--text.text--darken-4{color:#004700!important;caret-color:#004700!important}.v-application .warning{background-color:#e91e63!important;border-color:#e91e63!important}.v-application .warning--text{color:#e91e63!important;caret-color:#e91e63!important}.v-application .warning.lighten-5{background-color:#ffc0e7!important;border-color:#ffc0e7!important}.v-application .warning--text.text--lighten-5{color:#ffc0e7!important;caret-color:#ffc0e7!important}.v-application .warning.lighten-4{background-color:#ffa3cb!important;border-color:#ffa3cb!important}.v-application .warning--text.text--lighten-4{color:#ffa3cb!important;caret-color:#ffa3cb!important}.v-application .warning.lighten-3{background-color:#ff85b0!important;border-color:#ff85b0!important}.v-application .warning--text.text--lighten-3{color:#ff85b0!important;caret-color:#ff85b0!important}.v-application .warning.lighten-2{background-color:#ff6795!important;border-color:#ff6795!important}.v-application .warning--text.text--lighten-2{color:#ff6795!important;caret-color:#ff6795!important}.v-application .warning.lighten-1{background-color:#ff467c!important;border-color:#ff467c!important}.v-application .warning--text.text--lighten-1{color:#ff467c!important;caret-color:#ff467c!important}.v-application .warning.darken-1{background-color:#c9004b!important;border-color:#c9004b!important}.v-application .warning--text.text--darken-1{color:#c9004b!important;caret-color:#c9004b!important}.v-application .warning.darken-2{background-color:#aa0035!important;border-color:#aa0035!important}.v-application .warning--text.text--darken-2{color:#aa0035!important;caret-color:#aa0035!important}.v-application .warning.darken-3{background-color:#8b0021!important;border-color:#8b0021!important}.v-application .warning--text.text--darken-3{color:#8b0021!important;caret-color:#8b0021!important}.v-application .warning.darken-4{background-color:#6c000a!important;border-color:#6c000a!important}.v-application .warning--text.text--darken-4{color:#6c000a!important;caret-color:#6c000a!important}.v-application .admin{background-color:#e53935!important;border-color:#e53935!important}.v-application .admin--text{color:#e53935!important;caret-color:#e53935!important}.v-application .admin.lighten-5{background-color:#ffccb3!important;border-color:#ffccb3!important}.v-application .admin--text.text--lighten-5{color:#ffccb3!important;caret-color:#ffccb3!important}.v-application .admin.lighten-4{background-color:#ffaf98!important;border-color:#ffaf98!important}.v-application .admin--text.text--lighten-4{color:#ffaf98!important;caret-color:#ffaf98!important}.v-application .admin.lighten-3{background-color:#ff927e!important;border-color:#ff927e!important}.v-application .admin--text.text--lighten-3{color:#ff927e!important;caret-color:#ff927e!important}.v-application .admin.lighten-2{background-color:#ff7565!important;border-color:#ff7565!important}.v-application .admin--text.text--lighten-2{color:#ff7565!important;caret-color:#ff7565!important}.v-application .admin.lighten-1{background-color:#ff584c!important;border-color:#ff584c!important}.v-application .admin--text.text--lighten-1{color:#ff584c!important;caret-color:#ff584c!important}.v-application .admin.darken-1{background-color:#c50f1f!important;border-color:#c50f1f!important}.v-application .admin--text.text--darken-1{color:#c50f1f!important;caret-color:#c50f1f!important}.v-application .admin.darken-2{background-color:#a50009!important;border-color:#a50009!important}.v-application .admin--text.text--darken-2{color:#a50009!important;caret-color:#a50009!important}.v-application .admin.darken-3{background-color:#860000!important;border-color:#860000!important}.v-application .admin--text.text--darken-3{color:#860000!important;caret-color:#860000!important}.v-application .admin.darken-4{background-color:#690000!important;border-color:#690000!important}.v-application .admin--text.text--darken-4{color:#690000!important;caret-color:#690000!important}</style><link rel="preload" href="/data-fair/master/_nuxt/9971925.js" as="script"><link rel="preload" href="/data-fair/master/_nuxt/40e8f75.js" as="script"><link rel="preload" href="/data-fair/master/_nuxt/vendors/app.8092e66.css" as="style"><link rel="preload" href="/data-fair/master/_nuxt/862d701.js" as="script"><link rel="preload" href="/data-fair/master/_nuxt/app.5c9a69b.css" as="style"><link rel="preload" href="/data-fair/master/_nuxt/0ab56a0.js" as="script"><link rel="preload" href="/data-fair/master/_nuxt/pages/install/_id.b7304c9.css" as="style"><link rel="preload" href="/data-fair/master/_nuxt/69b6594.js" as="script"><link rel="preload" href="/data-fair/master/_nuxt/vendors/pages/about/_id/pages/functional-presentation/_id/pages/functional-presentation/index/pages//5652edfc.0b0b92d.css" as="style"><link rel="preload" href="/data-fair/master/_nuxt/0d0b6d1.js" as="script"><link rel="stylesheet" href="/data-fair/master/_nuxt/vendors/app.8092e66.css"><link rel="stylesheet" href="/data-fair/master/_nuxt/app.5c9a69b.css"><link rel="stylesheet" href="/data-fair/master/_nuxt/pages/install/_id.b7304c9.css"><link rel="stylesheet" href="/data-fair/master/_nuxt/vendors/pages/about/_id/pages/functional-presentation/_id/pages/functional-presentation/index/pages//5652edfc.0b0b92d.css"><link rel="preload" href="/data-fair/master/_nuxt/static/1617901650/install/install/state.js" as="script"><link rel="preload" href="/data-fair/master/_nuxt/static/1617901650/install/install/payload.js" as="script"><link rel="preload" href="/data-fair/master/_nuxt/static/1617901650/manifest.js" as="script">
  </head>
  <body>
    <div data-server-rendered="true" id="__nuxt"><!----><div id="__layout"><div data-app="true" id="app" class="v-application v-application--is-ltr theme--light"><div class="v-application--wrap"><nav class="v-navigation-drawer v-navigation-drawer--close v-navigation-drawer--fixed v-navigation-drawer--is-mobile theme--light" style="height:100vh;top:0;transform:translateX(-100%);width:300px"><div class="v-navigation-drawer__content"><a href="/data-fair/master/" tabindex="0" class="v-list-item v-list-item--link theme--light"><div class="v-avatar v-list-item__avatar brand-logo" style="height:40px;min-width:40px;width:40px"><div class="v-image v-responsive theme--light"><div class="v-image__image v-image__image--preload v-image__image--cover" style="background-position:center center"></div><div class="v-responsive__content"></div></div></div> <div class="v-list-item__content"><div class="v-list-item__title headline font-weight-bold">
          Data Fair
        </div></div></a> <hr role="separator" aria-orientation="horizontal" class="v-divider theme--light"> <div class="v-list v-sheet theme--light v-list--dense"><div class="v-list-group v-list-group--active v-list-group--no-action primary--text"><div tabindex="0" aria-expanded="true" role="button" class="v-list-group__header v-list-item v-list-item--active v-list-item--link theme--light"><a href="/data-fair/master/functional-presentation" tabindex="0" class="v-list-item v-list-item--link theme--light"><div class="v-list-item__title">
          Présentation fonctionnelle
        </div></a><div class="v-list-item__icon v-list-group__header__append-icon"><i aria-hidden="true" class="v-icon notranslate mdi mdi-chevron-down theme--light"></i></div></div><div class="v-list-group__items"> <a href="/data-fair/master/functional-presentation/introduction" tabindex="0" class="v-list-item v-list-item--link theme--light"><div class="v-list-item__title">
            Introduction
            <!----></div></a><div class="v-list-group v-list-group--no-action v-list-group--sub-group"><div tabindex="0" aria-expanded="false" role="button" class="v-list-group__header v-list-item v-list-item--link theme--light"><div class="v-list-item__icon v-list-group__header__prepend-icon"><i aria-hidden="true" class="v-icon notranslate mdi mdi-menu-down theme--light"></i></div><a href="/data-fair/master/functional-presentation/portal" tabindex="0" class="v-list-item v-list-item--link theme--light"><div class="v-list-item__title">
              Portail de données
            </div></a></div><!----></div><div class="v-list-group v-list-group--no-action v-list-group--sub-group"><div tabindex="0" aria-expanded="false" role="button" class="v-list-group__header v-list-item v-list-item--link theme--light"><div class="v-list-item__icon v-list-group__header__prepend-icon"><i aria-hidden="true" class="v-icon notranslate mdi mdi-menu-down theme--light"></i></div><a href="/data-fair/master/functional-presentation/back-office" tabindex="0" class="v-list-item v-list-item--link theme--light"><div class="v-list-item__title">
              Back Office
            </div></a></div><!----></div><a href="/data-fair/master/functional-presentation/extensions" tabindex="0" class="v-list-item v-list-item--link theme--light"><div class="v-list-item__title">
            Extensions
            <i aria-hidden="true" class="v-icon notranslate mdi mdi-alert theme--light error--text" style="font-size:16px"></i></div></a></div></div><div class="v-list-group v-list-group--no-action"><div tabindex="0" aria-expanded="false" role="button" class="v-list-group__header v-list-item v-list-item--link theme--light"><a href="/data-fair/master/technical-architecture" tabindex="0" class="v-list-item v-list-item--link theme--light"><div class="v-list-item__title">
          Architecture technique
        </div></a><div class="v-list-item__icon v-list-group__header__append-icon"><i aria-hidden="true" class="v-icon notranslate mdi mdi-chevron-down theme--light"></i></div></div><!----></div><div class="v-list-group v-list-group--no-action"><div tabindex="0" aria-expanded="false" role="button" class="v-list-group__header v-list-item v-list-item--link theme--light"><a href="/data-fair/master/install" tabindex="0" class="v-list-item v-list-item--link theme--light"><div class="v-list-item__title">
          Installation et configuration
        </div></a><div class="v-list-item__icon v-list-group__header__append-icon"><i aria-hidden="true" class="v-icon notranslate mdi mdi-chevron-down theme--light"></i></div></div><!----></div><div class="v-list-group v-list-group--no-action"><div tabindex="0" aria-expanded="false" role="button" class="v-list-group__header v-list-item v-list-item--link theme--light"><a href="/data-fair/master/interoperate" tabindex="0" class="v-list-item v-list-item--link theme--light"><div class="v-list-item__title">
          Interopérer avec Data Fair
        </div></a><div class="v-list-item__icon v-list-group__header__append-icon"><i aria-hidden="true" class="v-icon notranslate mdi mdi-chevron-down theme--light"></i></div></div><!----></div></div></div><div class="v-navigation-drawer__border"></div></nav> <main class="v-main" style="padding-top:0;padding-right:0;padding-bottom:0;padding-left:0"><div class="v-main__wrap"><div class="container doc-page"><div class="row"><div class="col"><h2 class="display1 my-4">
        Installation
      </h2> <div role="alert" class="v-alert v-sheet v-sheet--outlined theme--light v-alert--border v-alert--outlined v-alert--border-left warning--text"><div class="v-alert__wrapper"><i aria-hidden="true" class="v-icon notranslate v-alert__icon mdi mdi-exclamation theme--light warning--text"></i><div class="v-alert__content">
        Cette page est en chantier et les informations qu'elle contient peuvent ne pas être à jour.
      </div><div class="v-alert__border v-alert__border--left"></div></div></div> <div cols="12" style="display:none"><p>Cette application expose des services Web et interopère avec d'autres applications du même type. Pour comprendre comment <em>Data Fair</em> fonctionne, vous pouvez aller voir la <a href="https://koumoul-dev.github.io/data-fair/about/technical-overview">description technique</a>.</p>
<p>Nous proposons une installation simple grâce à l'utilisation de conteneurs <a href="https://docker.com">Docker</a> basés sur <a href="https://hub.docker.com/r/koumoul/data-fair/">l'image</a> que nous mettons à disposition. Le service peut être installé hors Docker, nous vous conseillons dans ce cas de regarder la documentation pour les développeurs directement dans le <a href="https://github.com/koumoul-dev/data-fair">répertoire du projet</a>.</p>
<h2 id="prérequis">Prérequis</h2>
<h3 id="configuration-matérielle">Configuration matérielle</h3>
<p>Ce service a été testé sous Linux (Ubuntu 16.04), vous pouvez utiliser n'importe quel système Linux compatible avec un démon Docker récent. Le service n'a pas besoin de beaucoup de ressources de calcul, mais plutôt de mémoire et d'entrée sortie. La configuration recommandée est la suivante :</p>
<ul>
<li>Au moins 2 coeurs, 4 si les base de données tournent sur la même machine</li>
<li>4 Go de RAM, 16 si les base données tournent sur la même machine. Cette quantité peut être plus importante si l'on souhaite stocker des volumes importants. Dans ce cas nous conseillons d'installer ElasticSearch sur une autre machine avec plus de mémoire vive, ou de faire un cluster sur plusieurs machines.</li>
<li>50 Go de disque dur, de type SSD. Cette quantité peut être plus importante suivant le volume de données que l'on souhaite gérer.</li>
<li>100 Mbits de bande passante au minimum, que ce soit en montant ou en descendant.</li>
</ul>
<h3 id="docker">Docker</h3>
<p>Installez Docker en suivant la <a href="https://docs.docker.com/engine/installation/">documentation officielle</a> très complète.</p>
<p>Nous conseillons aussi d'installer <a href="https://docs.docker.com/compose/install/">docker-compose</a> pour une vision plus claire de la configuration.</p>
<h3 id="mongodb">MongoDB</h3>
<p>Le service nécessite MongoDB 3.4 ou supérieur pour persister ses données. MongoDB peut être <a href="https://docs.mongodb.com/v3.4/installation/">installé de différentes manières</a>.</p>
<p><strong>Installer MongoDB manuellement est optionnel</strong>, vous pouvez opter pour une installation globale de tous les services avec Docker (voir plus bas).</p>
<h3 id="elasticsearch">ElasticSearch</h3>
<p>Le service nécessite ElasticSearch 6.0 avec le plugin ingest-attachment. Les instruction d'installation sont <a href="https://www.elastic.co/guide/en/elasticsearch/reference/6.0/install-elasticsearch.html">disponibles ici</a>.</p>
<p><strong>Installer ElasticSearch manuellement est optionnel</strong>, vous pouvez opter pour une installation globale de tous les services avec Docker (voir plus bas).</p>
<h3 id="annuaire-dutilisateurs">Annuaire d'utilisateurs</h3>
<p>Le service nécessite <a href="https://koumoul-dev.github.io/simple-directory/">Simple Directory</a> pour sa gestion des comptes.</p>
<p><strong>Installer Simple Directory individuellement est optionnel</strong>, vous pouvez opter pour une installation globale de tous les services avec Docker (voir plus bas).</p>
<h2 id="installation-recommandée">Installation recommandée</h2>
<p>Pour une installation avec docker-compose vous devez créer un fichier <code>docker-compose.yml</code>. Ci-dessous un exemple qui lance non seulement le service data-fair, mais aussi toutes ses dépendances et un proxy HTTP en frontal. Cet exemple peut être assez complet pour une mise en production simple sur une machine, nous allons détailler son paramétrage dans les sections suivantes:</p>
<pre><code class="language-yaml">version: '3'
services:

  #########################
  # Dynamic reverse proxy
  #########################

  traefik:
    image: traefik:1.7
    command:
      - "--docker.exposedbydefault=false"
      - "--forwardingtimeouts.dialtimeout=5m"
    restart: always
    ports:
      - 80:80
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock

  redirect-root:
    image: cusspvz/redirect
    restart: always
    labels:
      - "traefik.enable=true"
      - "traefik.frontend.rule=Path:/"
    environment:
      - REDIRECT=${PROTOCOL}://${DOMAIN}/data-fair
      - REDIRECT_TYPE=redirect

  #########################
  # HTTP services
  #########################

  data-fair:
    image: koumoul/data-fair:2
    restart: always
    volumes:
      - data-fair-data:/webapp/data
    labels:
      - "traefik.enable=true"
      - "traefik.frontend.rule=PathPrefixStrip:/data-fair/"
    environment:
      - DEBUG=upgrade*
      - PUBLIC_URL=${PROTOCOL}://${DOMAIN}/data-fair
      - WS_PUBLIC_URL=wss://${DOMAIN}/data-fair
      - DIRECTORY_URL=${PROTOCOL}://${DOMAIN}/simple-directory
      - PRIVATE_DIRECTORY_URL=http://simple-directory:8080
      - OPENAPI_VIEWER_URL=${PROTOCOL}://${DOMAIN}/api-doc/
      - THUMBOR_URL=${PROTOCOL}://${DOMAIN}/thumbor/
      - THUMBOR_KEY=${SECRET}
      - CAPTURE_URL=${PROTOCOL}://${DOMAIN}/capture/
      - NOTIFY_URL=${PROTOCOL}://${DOMAIN}/notify
      - NOTIFY_WS_URL=wss://${DOMAIN}/notify
      - MONGO_URL=mongodb://mongo:27017/data-fair
      - ES_HOST=elasticsearch:9200
      - SECRET_IDENTITIES=${SECRET}
      - SECRET_NOTIFICATIONS=${SECRET}

  simple-directory:
    image: koumoul/simple-directory:1
    restart: always
    volumes:
      - simple-directory-security:/webapp/security
    labels:
      - "traefik.enable=true"
      - "traefik.main.frontend.rule=PathPrefixStrip:/simple-directory"
      - "traefik.main.port=8080"
      - "traefik.maildev.frontend.rule=PathPrefixStrip:/mails"
      - "traefik.maildev.port=1080"
      - "traefik.maildev.frontend.auth.basic.users=${MAILDEV_BASIC}"
    environment:
      - PUBLIC_URL=${PROTOCOL}://${DOMAIN}/simple-directory
      - STORAGE_MONGO_URL=mongodb://mongo:27017/simple-directory
      - ADMINS=${ADMINS}
      - HOME_PAGE=${PROTOCOL}://${DOMAIN}
      - MAILS_TRANSPORT=${MAILS_TRANSPORT}
      - MAILDEV_ACTIVE=${MAILDEV}
      - MAILDEV_URL=${PROTOCOL}://${DOMAIN}/mails/
      - I18N_LOCALES=["fr"]
      - PASSWORDLESS=false
      - USER_SELF_DELETE=true

  openapi-viewer:
    image: koumoul/openapi-viewer:1
    restart: 'always'
    labels:
      - "traefik.enable=true"
      - "traefik.frontend.rule=PathPrefixStrip:/api-doc/"

  capture:
    image: koumoul/capture:1
    restart: 'always'
    shm_size: '1gb'
    environment:
      - PUBLIC_URL=${PROTOCOL}://${DOMAIN}/capture
      - DIRECTORY_URL=${PROTOCOL}://${DOMAIN}/simple-directory

  notify:
    image: koumoul/notify:0
    restart: 'always'
    environment:
      - PUBLIC_URL=${PROTOCOL}://${DOMAIN}/notify
      - WS_PUBLIC_URL=wss://${DOMAIN}/notify
      - DIRECTORY_URL=${PROTOCOL}://${DOMAIN}/simple-directory
      - OPENAPI_VIEWER_URL=${PROTOCOL}://${DOMAIN}/api-doc/
      - MONGO_URL=mongodb://mongo:27017/notify
      - SECRET_IDENTITIES=${SECRET}
      - SECRET_NOTIFICATIONS=${SECRET}
      - SECRET_SENDMAILS=${SECRET}

  thumbor:
    image: apsl/thumbor:6.4.2
    restart: 'always'
    environment:
      - SECURITY_KEY=${SECRET}
      - STORAGE_EXPIRATION_SECONDS=600
      - MAX_AGE=600
    labels:
      - "traefik.enable=true"
      - "traefik.frontend.rule=PathPrefixStrip:/thumbor/"

  #########################
  # Dependencies
  #########################

  elasticsearch:
    image: koumoul/data-fair-elasticsearch:7.10.1
    restart: always
    volumes:
      - elasticsearch-data:/usr/share/elasticsearch/data
    environment:
      - discovery.type=single-node

  mongo:
    image: mongo:4.0
    restart: always
    volumes:
      - mongo-data:/data/db

volumes:
  data-fair-data:
  simple-directory-security:
  elasticsearch-data:
  mongo-data:
</code></pre>
<p>Récupérer les dernières versions des images compatibles:</p>
<pre><code class="language-sh">docker-compose pull</code></pre>
<p>Préparez un fichier <code>.env</code> à côté du fichier <code>docker-compose.yml</code>:</p>
<pre><code class="language-sh"># quelques variables d'environnement nécessaires
export ADMINS='["alban.mouton@koumoul.com"]'
export SECRET=type some random string here</code></pre>
<p>La suite du contenu du fichier <code>.env</code> est discutée dans les sous-sections suivantes.</p>
<h3 id="variante-1--http-local-avec-envoi-de-mail-virtuel">Variante 1 : HTTP local avec envoi de mail virtuel</h3>
<p>Cette variante est utile pour se faire la main sur la logique de déploiement et tester.</p>
<p>Créez une paire identifiant / mot de passe pour la protection de la boite mail locale:</p>
<pre><code class="language-sh">htpasswd -nbm user passwd</code></pre>
<p>Puis copiez son contenu dans le fichier <code>.env</code>:</p>
<pre><code class="language-sh">MAILDEV_BASIC="résultat de htpasswd"
MAILDEV=true
PROTOCOL=http
DOMAIN=localhost</code></pre>
<p>Lancez les services:</p>
<pre><code class="language-sh">docker-compose up -d --force-recreate</code></pre>
<p>Vérifiez l'état des services:</p>
<pre><code class="language-sh">docker-compose ps</code></pre>
<p>Quand tous les services sont "Up" et "healthy" vous pouvez accéder à <a href="http://localhost">http://localhost</a>.
Pour créer des comptes vous aurez besoin d'accéder à la boite mail virtuelle <a href="http://localhost/mails">http://localhost/mails</a> protégée par identifiant = user et mot de passe = passwd.</p>
<h3 id="variante-2--http-sur-une-machine-privée-et-envoi-de-mails">Variante 2 : HTTP sur une machine privée et envoi de mails</h3>
<p>Cette variante peut suffire pour un usage en intranet par exemple.</p>
<p>Vous pouvez suivre les instructions précédentes. Mais les variables d'environnement sont différentes.</p>
<p>La variable MAILS_TRANSPORT attend un objet JSON de configuration compatible avec la librairie <a href="https://nodemailer.com/smtp/">nodemailer</a></p>
<p>Modifiez le contenu du fichier <code>.env</code>:</p>
<pre><code class="language-sh">ADMINS='["alban.mouton@koumoul.com"]'
MAILDEV=false
PROTOCOL=http
DOMAIN="nom de la machine"
MAILS_TRANSPORT='{"service": "Mailgun", "auth": {...}}'</code></pre>
<p>Lancez les services:</p>
<pre><code class="language-sh">docker-compose up -d --force-recreate</code></pre>
<p>Vérifiez l'état des services:</p>
<pre><code class="language-sh">docker-compose ps</code></pre>
<p>Et accédez sur "<a href="http://nom">http://nom</a> de la machine".</p>
<h3 id="variante-3--https-sur-un-serveur">Variante 3 : HTTPS sur un serveur</h3>
<p>Cette variante est une solution complète de déploiement sécurisé. En pré-requis minimal il faut:</p>
<ul>
<li>une machine virtuelle sur internet sécurisée (firewall, etc.) et disposant d'un démon docker</li>
<li>un nom de domaine configuré pour pointer vers l'adresse de cette machine virtuelle</li>
</ul>
<p><strong>À venir</strong></p>
<h3 id="mises-à-jour">Mises à jour</h3>
<p>La mise à jour s'effectue en lançant les 2 commandes suivantes :</p>
<pre><code class="language-sh">docker-compose pull
docker-compose up -d</code></pre>
<p>Pour plus d'informations sur les commandes disponibles, vous pouvez <a href="https://docs.docker.com/compose/">consulter la documentation</a>.</p>
</div></div></div></div></div></main> <footer class="v-footer pa-3 v-sheet theme--light"><div class="spacer"></div> <div>Powered by <a href="https://koumoul.com">Koumoul</a></div></footer></div></div></div></div><script defer src="/data-fair/master/_nuxt/static/1617901650/install/install/state.js"></script><script src="/data-fair/master/_nuxt/9971925.js" defer></script><script src="/data-fair/master/_nuxt/69b6594.js" defer></script><script src="/data-fair/master/_nuxt/0d0b6d1.js" defer></script><script src="/data-fair/master/_nuxt/40e8f75.js" defer></script><script src="/data-fair/master/_nuxt/862d701.js" defer></script><script src="/data-fair/master/_nuxt/0ab56a0.js" defer></script>
  </body>
</html>
