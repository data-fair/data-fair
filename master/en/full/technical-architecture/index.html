<!doctype html>
<html data-n-head-ssr>
  <head>
    <title>DataFair</title><meta data-n-head="ssr" charset="utf-8"><meta data-n-head="ssr" name="viewport" content="width=device-width,initial-scale=1"><meta data-n-head="ssr" data-hid="application" name="application-name" content="DataFair"><meta data-n-head="ssr" data-hid="description" name="description" content="DataFair - Documentation"><base href="/data-fair/master/"><link data-n-head="ssr" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Nunito:300,400,500,700,400italic|Material+Icons"><link data-n-head="ssr" rel="icon" type="image/x-icon" href="favicon.ico"><link data-n-head="ssr" rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Nunito:100,300,400,500,700,900&display=swap"><link data-n-head="ssr" rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/@mdi/font@latest/css/materialdesignicons.min.css"><style data-n-head="vuetify" type="text/css" id="vuetify-theme-stylesheet" nonce="undefined">.v-application a{color:#1e88e5}.v-application .primary{background-color:#1e88e5!important;border-color:#1e88e5!important}.v-application .primary--text{color:#1e88e5!important;caret-color:#1e88e5!important}.v-application .primary.lighten-5{background-color:#cfffff!important;border-color:#cfffff!important}.v-application .primary--text.text--lighten-5{color:#cfffff!important;caret-color:#cfffff!important}.v-application .primary.lighten-4{background-color:#b0f5ff!important;border-color:#b0f5ff!important}.v-application .primary--text.text--lighten-4{color:#b0f5ff!important;caret-color:#b0f5ff!important}.v-application .primary.lighten-3{background-color:#91d8ff!important;border-color:#91d8ff!important}.v-application .primary--text.text--lighten-3{color:#91d8ff!important;caret-color:#91d8ff!important}.v-application .primary.lighten-2{background-color:#70bdff!important;border-color:#70bdff!important}.v-application .primary--text.text--lighten-2{color:#70bdff!important;caret-color:#70bdff!important}.v-application .primary.lighten-1{background-color:#4da2ff!important;border-color:#4da2ff!important}.v-application .primary--text.text--lighten-1{color:#4da2ff!important;caret-color:#4da2ff!important}.v-application .primary.darken-1{background-color:#006fc9!important;border-color:#006fc9!important}.v-application .primary--text.text--darken-1{color:#006fc9!important;caret-color:#006fc9!important}.v-application .primary.darken-2{background-color:#0057ad!important;border-color:#0057ad!important}.v-application .primary--text.text--darken-2{color:#0057ad!important;caret-color:#0057ad!important}.v-application .primary.darken-3{background-color:#004092!important;border-color:#004092!important}.v-application .primary--text.text--darken-3{color:#004092!important;caret-color:#004092!important}.v-application .primary.darken-4{background-color:#002b78!important;border-color:#002b78!important}.v-application .primary--text.text--darken-4{color:#002b78!important;caret-color:#002b78!important}.v-application .secondary{background-color:#42a5f5!important;border-color:#42a5f5!important}.v-application .secondary--text{color:#42a5f5!important;caret-color:#42a5f5!important}.v-application .secondary.lighten-5{background-color:#e4ffff!important;border-color:#e4ffff!important}.v-application .secondary--text.text--lighten-5{color:#e4ffff!important;caret-color:#e4ffff!important}.v-application .secondary.lighten-4{background-color:#c5ffff!important;border-color:#c5ffff!important}.v-application .secondary--text.text--lighten-4{color:#c5ffff!important;caret-color:#c5ffff!important}.v-application .secondary.lighten-3{background-color:#a6f8ff!important;border-color:#a6f8ff!important}.v-application .secondary--text.text--lighten-3{color:#a6f8ff!important;caret-color:#a6f8ff!important}.v-application .secondary.lighten-2{background-color:#87dcff!important;border-color:#87dcff!important}.v-application .secondary--text.text--lighten-2{color:#87dcff!important;caret-color:#87dcff!important}.v-application .secondary.lighten-1{background-color:#66c0ff!important;border-color:#66c0ff!important}.v-application .secondary--text.text--lighten-1{color:#66c0ff!important;caret-color:#66c0ff!important}.v-application .secondary.darken-1{background-color:#018bd8!important;border-color:#018bd8!important}.v-application .secondary--text.text--darken-1{color:#018bd8!important;caret-color:#018bd8!important}.v-application .secondary.darken-2{background-color:#0072bc!important;border-color:#0072bc!important}.v-application .secondary--text.text--darken-2{color:#0072bc!important;caret-color:#0072bc!important}.v-application .secondary.darken-3{background-color:#0059a1!important;border-color:#0059a1!important}.v-application .secondary--text.text--darken-3{color:#0059a1!important;caret-color:#0059a1!important}.v-application .secondary.darken-4{background-color:#004286!important;border-color:#004286!important}.v-application .secondary--text.text--darken-4{color:#004286!important;caret-color:#004286!important}.v-application .accent{background-color:#ff9800!important;border-color:#ff9800!important}.v-application .accent--text{color:#ff9800!important;caret-color:#ff9800!important}.v-application .accent.lighten-5{background-color:#ffffa2!important;border-color:#ffffa2!important}.v-application .accent--text.text--lighten-5{color:#ffffa2!important;caret-color:#ffffa2!important}.v-application .accent.lighten-4{background-color:#ffff85!important;border-color:#ffff85!important}.v-application .accent--text.text--lighten-4{color:#ffff85!important;caret-color:#ffff85!important}.v-application .accent.lighten-3{background-color:#ffeb69!important;border-color:#ffeb69!important}.v-application .accent--text.text--lighten-3{color:#ffeb69!important;caret-color:#ffeb69!important}.v-application .accent.lighten-2{background-color:#ffcf4d!important;border-color:#ffcf4d!important}.v-application .accent--text.text--lighten-2{color:#ffcf4d!important;caret-color:#ffcf4d!important}.v-application .accent.lighten-1{background-color:#ffb32f!important;border-color:#ffb32f!important}.v-application .accent--text.text--lighten-1{color:#ffb32f!important;caret-color:#ffb32f!important}.v-application .accent.darken-1{background-color:#df7e00!important;border-color:#df7e00!important}.v-application .accent--text.text--darken-1{color:#df7e00!important;caret-color:#df7e00!important}.v-application .accent.darken-2{background-color:#bf6400!important;border-color:#bf6400!important}.v-application .accent--text.text--darken-2{color:#bf6400!important;caret-color:#bf6400!important}.v-application .accent.darken-3{background-color:#a14c00!important;border-color:#a14c00!important}.v-application .accent--text.text--darken-3{color:#a14c00!important;caret-color:#a14c00!important}.v-application .accent.darken-4{background-color:#843300!important;border-color:#843300!important}.v-application .accent--text.text--darken-4{color:#843300!important;caret-color:#843300!important}.v-application .error{background-color:#ff5252!important;border-color:#ff5252!important}.v-application .error--text{color:#ff5252!important;caret-color:#ff5252!important}.v-application .error.lighten-5{background-color:#ffe4d5!important;border-color:#ffe4d5!important}.v-application .error--text.text--lighten-5{color:#ffe4d5!important;caret-color:#ffe4d5!important}.v-application .error.lighten-4{background-color:#ffc6b9!important;border-color:#ffc6b9!important}.v-application .error--text.text--lighten-4{color:#ffc6b9!important;caret-color:#ffc6b9!important}.v-application .error.lighten-3{background-color:#ffa99e!important;border-color:#ffa99e!important}.v-application .error--text.text--lighten-3{color:#ffa99e!important;caret-color:#ffa99e!important}.v-application .error.lighten-2{background-color:#ff8c84!important;border-color:#ff8c84!important}.v-application .error--text.text--lighten-2{color:#ff8c84!important;caret-color:#ff8c84!important}.v-application .error.lighten-1{background-color:#ff6f6a!important;border-color:#ff6f6a!important}.v-application .error--text.text--lighten-1{color:#ff6f6a!important;caret-color:#ff6f6a!important}.v-application .error.darken-1{background-color:#df323b!important;border-color:#df323b!important}.v-application .error--text.text--darken-1{color:#df323b!important;caret-color:#df323b!important}.v-application .error.darken-2{background-color:#bf0025!important;border-color:#bf0025!important}.v-application .error--text.text--darken-2{color:#bf0025!important;caret-color:#bf0025!important}.v-application .error.darken-3{background-color:#9f0010!important;border-color:#9f0010!important}.v-application .error--text.text--darken-3{color:#9f0010!important;caret-color:#9f0010!important}.v-application .error.darken-4{background-color:maroon!important;border-color:maroon!important}.v-application .error--text.text--darken-4{color:maroon!important;caret-color:maroon!important}.v-application .info{background-color:#2196f3!important;border-color:#2196f3!important}.v-application .info--text{color:#2196f3!important;caret-color:#2196f3!important}.v-application .info.lighten-5{background-color:#d4ffff!important;border-color:#d4ffff!important}.v-application .info--text.text--lighten-5{color:#d4ffff!important;caret-color:#d4ffff!important}.v-application .info.lighten-4{background-color:#b5ffff!important;border-color:#b5ffff!important}.v-application .info--text.text--lighten-4{color:#b5ffff!important;caret-color:#b5ffff!important}.v-application .info.lighten-3{background-color:#95e8ff!important;border-color:#95e8ff!important}.v-application .info--text.text--lighten-3{color:#95e8ff!important;caret-color:#95e8ff!important}.v-application .info.lighten-2{background-color:#75ccff!important;border-color:#75ccff!important}.v-application .info--text.text--lighten-2{color:#75ccff!important;caret-color:#75ccff!important}.v-application .info.lighten-1{background-color:#51b0ff!important;border-color:#51b0ff!important}.v-application .info--text.text--lighten-1{color:#51b0ff!important;caret-color:#51b0ff!important}.v-application .info.darken-1{background-color:#007cd6!important;border-color:#007cd6!important}.v-application .info--text.text--darken-1{color:#007cd6!important;caret-color:#007cd6!important}.v-application .info.darken-2{background-color:#0064ba!important;border-color:#0064ba!important}.v-application .info--text.text--darken-2{color:#0064ba!important;caret-color:#0064ba!important}.v-application .info.darken-3{background-color:#004d9f!important;border-color:#004d9f!important}.v-application .info--text.text--darken-3{color:#004d9f!important;caret-color:#004d9f!important}.v-application .info.darken-4{background-color:#003784!important;border-color:#003784!important}.v-application .info--text.text--darken-4{color:#003784!important;caret-color:#003784!important}.v-application .success{background-color:#4caf50!important;border-color:#4caf50!important}.v-application .success--text{color:#4caf50!important;caret-color:#4caf50!important}.v-application .success.lighten-5{background-color:#dcffd6!important;border-color:#dcffd6!important}.v-application .success--text.text--lighten-5{color:#dcffd6!important;caret-color:#dcffd6!important}.v-application .success.lighten-4{background-color:#beffba!important;border-color:#beffba!important}.v-application .success--text.text--lighten-4{color:#beffba!important;caret-color:#beffba!important}.v-application .success.lighten-3{background-color:#a2ff9e!important;border-color:#a2ff9e!important}.v-application .success--text.text--lighten-3{color:#a2ff9e!important;caret-color:#a2ff9e!important}.v-application .success.lighten-2{background-color:#85e783!important;border-color:#85e783!important}.v-application .success--text.text--lighten-2{color:#85e783!important;caret-color:#85e783!important}.v-application .success.lighten-1{background-color:#69cb69!important;border-color:#69cb69!important}.v-application .success--text.text--lighten-1{color:#69cb69!important;caret-color:#69cb69!important}.v-application .success.darken-1{background-color:#2d9437!important;border-color:#2d9437!important}.v-application .success--text.text--darken-1{color:#2d9437!important;caret-color:#2d9437!important}.v-application .success.darken-2{background-color:#00791e!important;border-color:#00791e!important}.v-application .success--text.text--darken-2{color:#00791e!important;caret-color:#00791e!important}.v-application .success.darken-3{background-color:#006000!important;border-color:#006000!important}.v-application .success--text.text--darken-3{color:#006000!important;caret-color:#006000!important}.v-application .success.darken-4{background-color:#004700!important;border-color:#004700!important}.v-application .success--text.text--darken-4{color:#004700!important;caret-color:#004700!important}.v-application .warning{background-color:#e91e63!important;border-color:#e91e63!important}.v-application .warning--text{color:#e91e63!important;caret-color:#e91e63!important}.v-application .warning.lighten-5{background-color:#ffc0e7!important;border-color:#ffc0e7!important}.v-application .warning--text.text--lighten-5{color:#ffc0e7!important;caret-color:#ffc0e7!important}.v-application .warning.lighten-4{background-color:#ffa3cb!important;border-color:#ffa3cb!important}.v-application .warning--text.text--lighten-4{color:#ffa3cb!important;caret-color:#ffa3cb!important}.v-application .warning.lighten-3{background-color:#ff85b0!important;border-color:#ff85b0!important}.v-application .warning--text.text--lighten-3{color:#ff85b0!important;caret-color:#ff85b0!important}.v-application .warning.lighten-2{background-color:#ff6795!important;border-color:#ff6795!important}.v-application .warning--text.text--lighten-2{color:#ff6795!important;caret-color:#ff6795!important}.v-application .warning.lighten-1{background-color:#ff467c!important;border-color:#ff467c!important}.v-application .warning--text.text--lighten-1{color:#ff467c!important;caret-color:#ff467c!important}.v-application .warning.darken-1{background-color:#c9004b!important;border-color:#c9004b!important}.v-application .warning--text.text--darken-1{color:#c9004b!important;caret-color:#c9004b!important}.v-application .warning.darken-2{background-color:#aa0035!important;border-color:#aa0035!important}.v-application .warning--text.text--darken-2{color:#aa0035!important;caret-color:#aa0035!important}.v-application .warning.darken-3{background-color:#8b0021!important;border-color:#8b0021!important}.v-application .warning--text.text--darken-3{color:#8b0021!important;caret-color:#8b0021!important}.v-application .warning.darken-4{background-color:#6c000a!important;border-color:#6c000a!important}.v-application .warning--text.text--darken-4{color:#6c000a!important;caret-color:#6c000a!important}.v-application .admin{background-color:#e53935!important;border-color:#e53935!important}.v-application .admin--text{color:#e53935!important;caret-color:#e53935!important}.v-application .admin.lighten-5{background-color:#ffccb3!important;border-color:#ffccb3!important}.v-application .admin--text.text--lighten-5{color:#ffccb3!important;caret-color:#ffccb3!important}.v-application .admin.lighten-4{background-color:#ffaf98!important;border-color:#ffaf98!important}.v-application .admin--text.text--lighten-4{color:#ffaf98!important;caret-color:#ffaf98!important}.v-application .admin.lighten-3{background-color:#ff927e!important;border-color:#ff927e!important}.v-application .admin--text.text--lighten-3{color:#ff927e!important;caret-color:#ff927e!important}.v-application .admin.lighten-2{background-color:#ff7565!important;border-color:#ff7565!important}.v-application .admin--text.text--lighten-2{color:#ff7565!important;caret-color:#ff7565!important}.v-application .admin.lighten-1{background-color:#ff584c!important;border-color:#ff584c!important}.v-application .admin--text.text--lighten-1{color:#ff584c!important;caret-color:#ff584c!important}.v-application .admin.darken-1{background-color:#c50f1f!important;border-color:#c50f1f!important}.v-application .admin--text.text--darken-1{color:#c50f1f!important;caret-color:#c50f1f!important}.v-application .admin.darken-2{background-color:#a50009!important;border-color:#a50009!important}.v-application .admin--text.text--darken-2{color:#a50009!important;caret-color:#a50009!important}.v-application .admin.darken-3{background-color:#860000!important;border-color:#860000!important}.v-application .admin--text.text--darken-3{color:#860000!important;caret-color:#860000!important}.v-application .admin.darken-4{background-color:#690000!important;border-color:#690000!important}.v-application .admin--text.text--darken-4{color:#690000!important;caret-color:#690000!important}</style><link rel="preload" href="/data-fair/master/_nuxt/a94e28d.js" as="script"><link rel="preload" href="/data-fair/master/_nuxt/7f0cd2a.js" as="script"><link rel="preload" href="/data-fair/master/_nuxt/css/73cb789.css" as="style"><link rel="preload" href="/data-fair/master/_nuxt/4cdf224.js" as="script"><link rel="preload" href="/data-fair/master/_nuxt/css/5c9a69b.css" as="style"><link rel="preload" href="/data-fair/master/_nuxt/c90eb1d.js" as="script"><link rel="preload" href="/data-fair/master/_nuxt/css/84187a3.css" as="style"><link rel="preload" href="/data-fair/master/_nuxt/a92e0e2.js" as="script"><link rel="stylesheet" href="/data-fair/master/_nuxt/css/73cb789.css"><link rel="stylesheet" href="/data-fair/master/_nuxt/css/5c9a69b.css"><link rel="stylesheet" href="/data-fair/master/_nuxt/css/84187a3.css"><link rel="preload" href="/data-fair/master/_nuxt/static/1623081402/en/full/technical-architecture/state.js" as="script"><link rel="preload" href="/data-fair/master/_nuxt/static/1623081402/en/full/technical-architecture/payload.js" as="script"><link rel="preload" href="/data-fair/master/_nuxt/static/1623081402/manifest.js" as="script">
  </head>
  <body>
    <div data-server-rendered="true" id="__nuxt"><!----><div id="__layout"><div data-app="true" id="app" class="v-application v-application--is-ltr theme--light"><div class="v-application--wrap"><main class="v-main" style="padding-top:0;padding-right:0;padding-bottom:0;padding-left:0"><div class="v-main__wrap"><div><div class="mt-6 pt-6 text-center col"><div class="v-image v-responsive my-6 theme--light" style="height:160px"><div class="v-image__image v-image__image--preload v-image__image--contain" style="background-position:center center"></div><div class="v-responsive__content"></div></div> <h1 class="text-h3 grey--text text--darken-3">
      Data Fair
    </h1> <h4>
      Version 2.29.5
    </h4> <h1 class="text-h3 grey--text text--darken-3" style="margin-top:200px">
      Architecture technique
    </h1> <h4 style="margin-top:200px!important">
      07 juin 2021<br></h4></div> <div class="page-break"></div> <h2 class="text-h4 my-4 grey--text text--darken-3">
    Table des matières
  </h2> <h4>
      1 - Introduction
    </h4><h4>
      2 - Data Fair
    </h4><h4>
      3 - Simple Directory
    </h4><h4>
      4 - Data Fair Portal
    </h4><h4>
      5 - Connecteurs de catalogues
    </h4><h4>
      6 - Data Fair Processings
    </h4><h4>
      7 - Notify
    </h4><h4>
      8 - Analytics
    </h4><h4>
      9 - Capture
    </h4><h4>
      10 - Thumbor
    </h4><h4>
      11 - Backup
    </h4><h4>
      12 - Statistiques d'API
    </h4> <div class="page-break"></div> <h2 class="text-h4 my-4 grey--text text--darken-3">
      1 - Introduction
    </h2> <div class="article"><p>L'architecture technique retenu est une plateforme composé de différents services Web. La plupart de ces services sont open source et décrits ici, mais certaines extensions peuvent être disponibles sous la forme de services distants propriétaires :</p>
<ul>
<li><strong>Data Fair</strong>, le coeur de la solution, permet d’indexer, d’Apifier, d’enrichir et de partager facilement ses données</li>
<li><strong>Simple Directory</strong> permet de se connecter au portail et gérer les comptes</li>
<li><strong>Data Fair Portal</strong> permet de créer facilement plusieurs portails de données, pour du partage en opendata ou en interne</li>
<li>Les <strong>Connecteurs de catalogues</strong> permettent de se synchroniser avec d'autres catalogues de données, dans les 2 sens</li>
<li>Les <strong>Data Fair Processings</strong> permet de programmer des traitements périodiques pour mettre à jour les données et de récolter les données issues de l’IOT</li>
<li><strong>Notify</strong> permet de gérer les alertes et les notifications</li>
<li><strong>Les analytics</strong> peuvent être gérés directement dans la plateforme à l'aide de Matomo</li>
<li><strong>Capture</strong> permet de créer les miniatures et les captures d’images des visualisations</li>
<li><strong>Thumbor</strong> permet les traitement des images des jeux de données</li>
<li><strong>Backup</strong> permet de gérer les sauvegardes de la plateforme</li>
<li>Les <strong>services distants</strong> ne sont pas développées dans ce projet : ce sont des applications Web développées et déployées de manière autonome qui respectent les règles d’interopérabilité d’OpenAPI 3.0 avec Data Fair. Ils sont disponibles sous forme d'extensions.</li>
<li>Les <strong>visualisations de données</strong> : certaines sont open source, d'autres sont propriétaires (extensions en libre accès ou nécessitant un abonnement). Chaque application de base peut être utilisée autant de fois que désiré pour valoriser différents <strong>jeux de données</strong>. Data Fair permet de stocker et éditer les différents paramètres d'une même application de base.</li>
</ul>
<h3 id="architecture-technique-complète">Architecture technique complète</h3>
<p><img src="./images/technical-architecture/architecture.jpg" alt="Catalogue de données"></p>
<h3 id="authentification">Authentification</h3>
<p>Le mécanisme d'authentification utilisé pour sécuriser les APIs des différents service est le JWT (Json Web Token). La sécurité repose sur des mécanismes de cryptograhie asymétrique (RSA). La session utilisateur est maintenue coté client, ce qui permet d'avoir un backend sans état, et donc scalable. Le backend n'émet pas de JWT : il doit donc être relié à un annuaire <a href="https://koumoul-dev.github.io/simple-directory/">simple directory</a> qui en émet. Le lien vers cet annuaire permet de télécharger sa clé publique pour ensuite vérifier que les JWT reçus soient valides.</p>
<h3 id="déploiement">Déploiement</h3>
<p>Les différents services sont livré avec <a href="https://www.docker.com/">Docker</a>. Nous recommandons de les déployer et de les opérer dans un environnement tel que Kubernetes.</p>
<p>Il est possible de déployer ces différents service à l'aide de docker-compose également. Cela permet de démarrer plus rapidement, et est particulièrement adapté pour un déploiement en local pour tester la plateforme ou développer des extensions pour celle-ci.</p>
<p>Pour plus de détails, vous pouvez consulter la <a href="install/install">documentation d'installation</a>.</p>
<h3 id="licences">Licences</h3>
<p>Les différents services sont <em>open source</em>, avec comme licence l'AGPL v3, qui est une licence copyleft : tous ceux mettant le service à disposition d'autres utilisateurs doivent partager les éventuelles améliorations qu'ils y apporteraient. Nous avons choisi de rendre ces services <em>open source</em> pour 2 raisons : pour partager des données <em>open data</em>, il nous paraît naturel d'utiliser un service <em>open source</em>, et quel que soit le type de données, l'ouverture du code offre des garanties de sécurité et de pérennité qui permet aux organisations de déployer ces services sur leurs propres serveurs en toute sérénité.</p>
</div><div class="page-break"></div> <h2 class="text-h4 my-4 grey--text text--darken-3">
      2 - Data Fair
    </h2> <div class="article"><p>Data Fair permet d'exposer facilement ses données via une API web, contractualisée et documentée, ce qui permet aux développeurs de les réutiliser facilement dans leurs <strong>applications</strong>. De plus les données peuvent être sémantisées, ce qui permet ensuite de les enrichir avec d'autres données sémantisées. Ainsi, des données qui ont une adresse peuvent par exemple être complétées par des coordonnées GPS, ce qui permet ensuite de les afficher sur une carte.</p>
<p>Le coeur de la solution permet</p>
<ul>
<li>d’indexer des données</li>
<li>d’Apifier des données</li>
<li>d’enrichir des données</li>
<li>de partager des données</li>
<li>de configurer les visualisations</li>
<li>de gérer les droits d’accès aux données et aux visualisations (publication)</li>
</ul>
<p>Cette page présente brièvement les langages de programmation, services et outils utilisés pour réaliser ce projet. Pour les développeurs vous pouvez consulter directement le <a href="https://github.com/koumoul-dev/data-fair">README et le code source sur github</a>.</p>
<h2 id="backend">Backend</h2>
<p>Le backend sert l'application cliente (frontend) et l'API. Le frontend est une application Web dynamique avec un rendu côté serveur partiel et un rendu final côté client en Javascript.</p>
<h3 id="persistance">Persistance</h3>
<p>Ce service utilise 3 types de persistance : fichier, base de données et moteur de recherche.</p>
<p>La persistance fichier est utilisée pour stocker les jeux de données des utilisateurs : les fichiers sont stockés tels quels sur le système de fichier et sont ensuite analysés puis indexés.</p>
<p>Les informations sur les jeux de données, les services distants et les configurations d'applications sont stockées dans une base de données <a href="https://www.mongodb.com/fr">MongoDB</a>, qui est une base NoSQL open source orientée documents. Les jeux de données incrémentaux sont également stockés dans cette base.</p>
<p>Les datasets sont indexés dans un moteur de recherche open source <a href="https://www.elastic.co/fr/products/elasticsearch">ElasticSearch</a>. Très performant et puissant il permet de faire des recherches textuelles et des agrégations pour des temps de réponse irréprochables.</p>
<h2 id="front-end">Front end</h2>
<p>L'interface du service est une applications Web (HTML/CSS/JS).</p>
<p>Le framework Javascript utilisé est <a href="https://vuejs.org/">VueJS 2</a> complété principalement par <a href="https://nuxtjs.org/">Nuxt</a> et <a href="https://vuetifyjs.com/en/">Vuetify</a>. Le tout forme un environnement très complet pour développer des interfaces graphiques dynamiques et claires. La documentation sur cet écosystème est bien fournie et de qualité. Ce n'est pas pour rien que VueJS fait partie des projets Github les plus populaires.</p>
<h2 id="code-source">Code source</h2>
<p>Le code du backend est écrit en <a href="https://nodejs.org/en/">NodeJS</a>, en respectant la syntaxe ES7. Le code utilise donc massivement les promesses, cachées derrières des mots clés comme <em>async</em> ou <em>await</em>. Cela permet d'avoir du code clair, concis et facilement compréhensible, tout en étant très performant grâce à une gestion non bloquante des opérations asynchrones.</p>
<p>Un autre aspect de NodeJS est très utilisé dans ce projet : la gestion d'opérations en flux (streams). Cela permet de réaliser des traitements sur des volumes importants sans abuser des ressources de la machine. Ce service demande donc peu de mémoire vive pour fonctionner (mais il en faudra par contre une bonne quantité pour ElasticSearch).</p>
<p>Le serveur web et l'API sont écrits avec le framework <a href="https://expressjs.com/fr/">express 4</a> qui est utilisé dans de nombreux projets Web NodeJS. Les briques fonctionnelles sont séparées dans des <em>router</em> Express, qui permettent par exemple de définir les opérations autour d'un certain concept.</p>
</div><div class="page-break"></div> <h2 class="text-h4 my-4 grey--text text--darken-3">
      3 - Simple Directory
    </h2> <div class="article"><p>La connexion et la gestion des comptes est assurée par Simple Directory. Il permet de gérer 2 types de comptes : les comptes utilisateurs et les comptes organisation.</p>
<h3 id="gestion-de-session-décentralisée">Gestion de session décentralisée</h3>
<p>Le rôle principal de Simple Directory est de permettre aux utilisateurs de s'authentifier dans la plateforme. Cela se fait au moyen de JWT (JSON Web Token) qui sont stockés coté client. Les clients envoient leur JWT à chaque requête HTTP, et chaque service dans l'infrastructure est capable de vérifier qu'un JWT est correct. Cela se fait en vérifiant le jeton avec la clé publique mise à leur disposition par Simple Directory.</p>
<h3 id="connection-des-utilisateurs">Connection des utilisateurs</h3>
<p>Les utilisateurs peuvent se connecter avec un mot de passe et un email ou en utilisant un compte externe existant tel qu’un compte Gmail, Facebook, Github ou Linkedin via le protocole oAuth2.</p>
<p>D’autres protocoles ou fournisseurs d’identités tels que LDAP ou SSO vont bientôt être implémentés.</p>
<h3 id="stack-technique">Stack technique</h3>
<p>Le backend de Simple Directory est écrit en NodeJS avec le framework ExpressJS. La persistance est assurée avec MongoDB. Le frontend est réalisé avec les frameworks VueJS, VuetifyJS et NuxtJS. La création et gestion des JWT est assurée grâce à différentes librairies open source.</p>
<p>Il n'y a pour l'instant qu'un mode de distribution qui est Docker, et il est recommandé d'opérer ce service dans un environnement tel que Kubernetes.</p>
</div><div class="page-break"></div> <h2 class="text-h4 my-4 grey--text text--darken-3">
      4 - Data Fair Portal
    </h2> <div class="article"><p>Data Fair Portal permet de réaliser des portails de données, publics ou privés.</p>
<p>Une organisation peut avoir plusieurs portails, et il sera bientôt possible de réaliser des portails multi-organisations. Chaque portail peut être publié sur un nom de domaine différent, Data Fair Portal agît à la manière d'un reverse proxy pour que chaque requête HTTP soit traitée dans le contexte du portail auquel elle fait référence.</p>
<p>L'authentification avec Simple Directory n'étant possible que sur le même domaine (ou sur un sous domaine de celui pour lequel Simple Directory est configuré), les portails de données sur un autre domaine ne peuvent être que des portails open data.</p>
<h3 id="stack-technique">Stack technique</h3>
<p>Le backend de Data Fair Portal est écrit en NodeJS avec le framework ExpressJS. La persistance est assurée avec MongoDB. Le frontend est réalisé avec les frameworks VueJS, VuetifyJS et NuxtJS. La configuration des pages est faites à l'aide de JSON schémas interprétés par la librairie VJFS.</p>
<p>Il n'y a pour l'instant qu'un mode de distribution qui est Docker, et il est recommandé d'opérer ce service dans un environnement tel que Kubernetes.</p>
</div><div class="page-break"></div> <h2 class="text-h4 my-4 grey--text text--darken-3">
      5 - Connecteurs de catalogues
    </h2> <div class="article"><p>Les connecteurs de catalogues permettent d'interagir avec des catalogues de données, pour moissonner leurs données ou au contraire y publier des jeux de données hébergés sur Data Fair. Contrairement aux traitements de données périodiques, les connecteur de catalogue permettent de synchroniser des ensembles de jeux de données.</p>
<p>Une refonte est en cours concernant ces connecteurs qui vont devoir être réaliser sous la forme d'API Rest respectant un certain contrat spécifié au format OpenAPI 3.1.</p>
</div><div class="page-break"></div> <h2 class="text-h4 my-4 grey--text text--darken-3">
      6 - Data Fair Processings
    </h2> <div class="article"><p>Data Fair Processings permet de programmer des traitements périodiques. Ils permettent d'aller chercher des données à certains endroits, les transformer et les publier sur Data Fair. Il est aussi prévu de pouvoir faire prochainement l'inverse. Il permet en pratique de mettre a jour automatiquement des jeux de données spécifiques.</p>
<h3 id="stack-technique">Stack technique</h3>
<p>Le backend de Data Fair Processings est écrit en NodeJS avec le framework ExpressJS. La persistance est assurée avec MongoDB. Le frontend est réalisé avec les frameworks VueJS, VuetifyJS et NuxtJS. Les plugins pour ajouter de nouveaux types de traitements sont à écrire en NodeJS, mais il est prévu dans le futur de pouvoir supporter des plugins écrits dans d'autres langages.</p>
<p>Il n'y a pour l'instant qu'un mode de distribution qui est Docker, et il est recommandé d'opérer ce service dans un environnement tel que Kubernetes.</p>
</div><div class="page-break"></div> <h2 class="text-h4 my-4 grey--text text--darken-3">
      7 - Notify
    </h2> <div class="article"><p>Le service <strong>Notify</strong> permet de gérer les notifications d'une plateforme. Celles-ci peuvent être transmises dans le navigateur, sur un smartphone ou par email.</p>
<h3 id="stack-technique">Stack technique</h3>
<p>Le backend de Notify est écrit en NodeJS avec le framework ExpressJS. La persistance est assurée avec MongoDB. Le frontend est réalisé avec les frameworks VueJS, VuetifyJS et NuxtJS.</p>
<p>Il n'y a pour l'instant qu'un mode de distribution qui est Docker, et il est recommandé d'opérer ce service dans un environnement tel que Kubernetes.</p>
</div><div class="page-break"></div> <h2 class="text-h4 my-4 grey--text text--darken-3">
      8 - Analytics
    </h2> <div class="article"><p>La gestion des analytics et autres statistiques d'utilisation de la plateforme peut se faire de 2 manières :</p>
<ul>
<li>A l'aide d'un service en ligne externe à la plateforme, tel que Google Analytics</li>
<li>Avec un service d'analytics déployé sur la même infrastructure que Data Fair : dans ce cas nous recommandons le logiciel open source <a href="https://fr.matomo.org/matomo-on-premise/">Matomo</a> (anciennement Piwik).</li>
</ul>
<h3 id="matomo">Matomo</h3>
<p>Matomo est écrit en PHP et nécessite une base de données MySQL, comme par exemple MariaDB. Il est distribué sous forme de conteneurs Docker, et nous recommandons de l'intégrer à la plateforme de cette manière.</p>
</div><div class="page-break"></div> <h2 class="text-h4 my-4 grey--text text--darken-3">
      9 - Capture
    </h2> <div class="article"><p>Le service Capture permet de créer des images à partir de visualisations web ou des documents PDF à partir de pages web.</p>
<h3 id="stack-technique">Stack technique</h3>
<p>Le backend de Capture est écrit en NodeJS avec le framework ExpressJS. Ce service ne possède pas de persistance ni de frontend. Ce service utilise un navigateur headless pour faire les rendu qui est <a href="https://github.com/puppeteer/puppeteer">Puppeteer</a></p>
<p>Il n'y a pour l'instant qu'un mode de distribution qui est Docker, et il est recommandé d'opérer ce service dans un environnement tel que Kubernetes.</p>
</div><div class="page-break"></div> <h2 class="text-h4 my-4 grey--text text--darken-3">
      10 - Thumbor
    </h2> <div class="article"><p><a href="https://github.com/thumbor/thumbor">Thumbor</a> est un service qui permet d'effectuer des traitements sur les images, dans le but d'améliorer leur affichage :</p>
<ul>
<li>Découpe une image (Crop) pour par exemple avoir des images ayant une proportion bien définie</li>
<li>Redimensionnement d'une image pour diminuer sa taille et ainsi gagner en vitesse d'affichage dans le portail ou dans les visualisations</li>
</ul>
</div><div class="page-break"></div> <h2 class="text-h4 my-4 grey--text text--darken-3">
      11 - Backup
    </h2> <div class="article"><p>Le service Backup permet de sauvegarder les données des différents services de la plateforme dans un format compressé.</p>
<p>Les differents base MongoDB, les données de data-fair et les utilisateurs de simple-directory sont enregistrées lors d’une sauvegarde.
Il est possible de configurer une sauvegarde périodique ou de déclencher une sauvegarde manuellement.</p>
<h3 id="stack-technique">Stack technique</h3>
<p>Le backend de Backup est écrit en NodeJS avec le framework ExpressJS. La persistance est assurée avec MongoDB. Le frontend est réalisé avec les frameworks VueJS, VuetifyJS et NuxtJS. De part son rôle, il est important d'avoir des volumes très fiables avec ce service.</p>
<p>Il n'y a pour l'instant qu'un mode de distribution qui est Docker, et il est recommandé d'opérer ce service dans un environnement tel que Kubernetes.</p>
</div><div class="page-break"></div> <h2 class="text-h4 my-4 grey--text text--darken-3">
      12 - Statistiques d'API
    </h2> <div class="article"><p>HTTP logs permet d'extraire des statistiques d'utilisation des API à partir des logs HTTP de services tels que Nginx. Dans la mesure ou Data Fair et les différents services associés utilisent beaucoup les mécanismes de cache pour améliorer les temps d'accès aux ressources, des statistiques précises d'utilisation des différents points d'accès de la plateforme ne peuvent être extraites qu'après coup.</p>
<p>Les logs d'accès aux API sont publiés sur Data Fair sous la forme d'un jeu de données qui peut ensuite être exposé partiellement à des organisation en leur proposant les données filtrées les concernant.</p>
</div></div></div></main></div></div></div></div><script defer src="/data-fair/master/_nuxt/static/1623081402/en/full/technical-architecture/state.js"></script><script src="/data-fair/master/_nuxt/a94e28d.js" defer></script><script src="/data-fair/master/_nuxt/a92e0e2.js" defer></script><script src="/data-fair/master/_nuxt/7f0cd2a.js" defer></script><script src="/data-fair/master/_nuxt/4cdf224.js" defer></script><script src="/data-fair/master/_nuxt/c90eb1d.js" defer></script>
  </body>
</html>
